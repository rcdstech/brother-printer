<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" rel="stylesheet">


    <script
            crossorigin="anonymous"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <style>
        #url {
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <form enctype="multipart/form-data">
            <div class="form-group">
                <label for="file">Json File</label>
                <input accept=".json,application/json" name="avatar" type="file" class="form-control"/>
            </div>
            <input class="btn btn-default" type="button" value="Upload"/>
        </form>
    </div>
</div>
<label id="url" data-toggle="tooltip" title="Click me to Copy URL" onclick="copyToClipboard()"></label>
<script>
    let url = '';

    function copyToClipboard(element) {
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val(url).select();
        document.execCommand("copy");
        $temp.remove();
    }
    $(document).ready(function() {
        $(':button').prop('disabled', true);
        $('[data-toggle="tooltip"]').tooltip();
    });
    $(':file').on('change', function () {
        var file = this.files[0];
        $(':button').addClass('btn-primary');
        $(':button').removeClass('btn-default');
        $(':button').prop('disabled', false);
    });
    $(':button').on('click', function () {
        $.ajax({
            // Your server script to process the upload
            url: '/upload',
            type: 'POST',

            // Form data
            data: new FormData($('form')[0]),

            // Tell jQuery not to process data or worry about content-type
            // You *must* include these options!
            cache: false,
            contentType: false,
            processData: false,
            success: function (data) {
                url = window.location + 'xml/displayScreen/' + data;
                document.getElementById('url').innerText = url;
                $(':file').val(null);
                $(':button').removeClass('btn-primary');
                $(':button').addClass('btn-default');
                $(':button').prop('disabled', true);
            }
        });
    });
</script>
</body>
</html>
